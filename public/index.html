<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YAMI BOMBER</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Roboto+Mono:wght@400;700&display=swap');
    body {margin:0;background:#000;color:#0ff;font-family:'Roboto Mono',monospace;overflow:hidden;}
    canvas {position:fixed;top:0;left:0;z-index:0;}
    .container {position:relative;z-index:10;max-width:500px;margin:40px auto;padding:30px;background:rgba(0,10,30,0.85);border:2px solid #0ff;border-radius:15px;box-shadow:0 0 40px #0ff, inset 0 0 20px #0ff;}
    h1 {font-family:'Orbitron',sans-serif;text-align:center;font-size:2.8em;margin:0 0 10px;color:#0ff;text-shadow:0 0 20px #0ff, 0 0 40px #0ff;animation:glow 2s infinite alternate;}
    .subtitle {text-align:center;color:#0f8;margin-bottom:20px;font-size:14px;}
    input,button {width:100%;padding:16px;margin:12px 0;border:2px solid #0ff;background:rgba(0,255,255,0.05);color:#0ff;border-radius:10px;font-size:16px;transition:0.3s;}
    input:focus {outline:none;box-shadow:0 0 20px #0ff;background:rgba(0,255,255,0.15);}
    button {background:linear-gradient(45deg,#0ff,#00f);color:#000;font-weight:bold;cursor:pointer;box-shadow:0 0 30px #0ff;}
    button:hover {transform:scale(1.05);box-shadow:0 0 50px #0ff;}
    .bar {height:30px;background:#001;border:2px solid #0ff;border-radius:15px;overflow:hidden;margin:20px 0;position:relative;}
    .fill {height:100%;width:0%;background:linear-gradient(90deg,#0ff,#00f);transition:width 0.6s;}
    .percent {position:absolute;width:100%;text-align:center;line-height:30px;font-weight:bold;text-shadow:0 0 10px #000;}
    .stats {display:flex;justify-content:space-around;font-size:20px;margin:15px 0;color:#0ff;text-shadow:0 0 10px #0ff;}
    #log {height:250px;overflow-y:auto;background:#000;padding:15px;border:2px dashed #0ff;border-radius:10px;font-size:13px;margin-top:20px;}
    .s{color:#0f0;} .f{color:#f00;}
    @keyframes glow {from{text-shadow:0 0 20px #0ff;} to{text-shadow:0 0 50px #0ff,0 0 80px #0ff;}}
    @keyframes pulse {0%,100%{opacity:0.7} 50%{opacity:1}}
  </style>
</head>
<body>
<canvas id="canvas"></canvas>
<div class="container">
  <h1>YAMI BOMBER v1</h1>
  <div class="subtitle">MAX LIMIT: 500 SMS | 11 SERVICES</div>
  
  <input type="text" id="target" placeholder="TARGET NUMBER (09xxxxxxxxx)" maxlength="11">
  <input type="number" id="rounds" value="45" min="1" max="45" placeholder="Max 45 rounds = ~500 SMS">

  <button onclick="launch()">LAUNCH NUCLEAR ATTACK</button>

  <div class="bar"><div class="fill" id="fill"></div><div class="percent" id="percent">0%</div></div>
  <div class="stats">
    <div>SUCCESS: <span id="s">0</span></div>
    <div>FAILED: <span id="f">0</span></div>
    <div>TOTAL: <span id="t">0</span></div>
  </div>

  <div id="log">System ready. Enter target and launch attack.</div>
</div>

<script>
// Matrix Rain Background
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
const letters = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン';
const fontSize = 14;
const columns = canvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);

function draw() {
  ctx.fillStyle = 'rgba(0,0,0,0.05)';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = '#0ff';
  ctx.font = fontSize + 'px monospace';
  for(let i=0;i<drops.length;i++){
    const text = letters.charAt(Math.floor(Math.random()*letters.length));
    ctx.fillText(text, i*fontSize, drops[i]*fontSize);
    if(drops[i]*fontSize > canvas.height && Math.random()>0.975) drops[i]=0;
    drops[i]++;
  }
}
setInterval(draw, 33);

async function launch() {
  const target = document.getElementById("target").value.trim();
  const rounds = parseInt(document.getElementById("rounds").value) || 45;
  const log = document.getElementById("log");
  const fill = document.getElementById("fill");
  const percent = document.getElementById("percent");

  if (!/^09\d{9}$/.test(target)) {
    log.innerHTML = '<span class="f">INVALID TARGET NUMBER!</span>'; return;
  }

  log.innerHTML = `INITIALIZING ATTACK ON <span class="s">${target}</span>...<br>`;
  fill.style.width = "0%"; percent.textContent = "0%";

  const es = new EventSource("/api/attack", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({target, rounds})
  });

  es.onmessage = function(e) {
    const d = JSON.parse(e.data);
    if (d.error) { log.innerHTML += `<span class="f">${d.error}</span>`; es.close(); return; }
    if (d.type==="log") {
      fill.style.width = d.progress + "%";
      percent.textContent = d.progress + "%";
      document.getElementById("s").textContent = d.s;
      document.getElementById("f").textContent = d.f;
      document.getElementById("t").textContent = d.t;
      log.innerHTML += `<span class="${d.status==="success"?"s":"f"}">[${d.service}] </span>`;
      log.scrollTop = log.scrollHeight;
    }
    if (d.type==="done") {
      fill.style.width = "100%"; percent.textContent = "NUCLEAR STRIKE COMPLETE";
      log.innerHTML += "<br><br><span class='s'>ATTACK FINISHED — TARGET DESTROYED</span>";
      es.close();
    }
  };
}
</script>
</body>
</html>
